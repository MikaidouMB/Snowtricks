{% extends 'base.html.twig' %}

{% block title %}Editer figure{% endblock %}

{% block body %}
    <div class="container mt-3 mb-4">
        {{ form_errors(form) }}
        <h1>Editer figure</h1>
        <div class="col-12 mt-4">
            {{ form_start(form) }}
            {{ form_widget(form._token) }}
            <div class="mt-4">
                <strong>{{ form_row(form.nameFigure) }}</strong>
            </div>
            <div class="mt-4" style="width: 1300px">
            <strong>{{ form_row(form.description) }}</strong>
            </div>
            <div class="mt-4">
            <strong>{{ form_row(form.images) }}</strong>
            </div>
            {% for image in trick.images %}
                <img id="images" class="mt-3" src=" {{ asset('/uploads/' ~ image.name) }}" alt="Image" height="150vw" />
                {% for image in form.images %}
                    {{ include("trick/_image.html.twig", {form: image}) }}
                {% endfor %}
                <a href= "{{ path('trick_delete_image', {idTrick: trick.id , id: image.id}) }}"
                   data-delete data-token ="{{ csrf_token('delete' ~ image.id) }}"
                   onclick="return confirm('Etes vous sure?')"
                   class="btn btn-danger" >Supprimer
                </a>
            {% endfor %}
            <div class="mt-4">
            <strong>{{ form_row(form.categories) }}</strong>
            </div>
            <div class="mt-4">
            <button type="button" id="btn-delete" class="btn btn-info btn-new mt-3 mb-2" data-collection="#videos">Ajouter un lien vers une vidéo</button>
            </div>
            <div
                    id="videos"
                    class="row"
                    data-prototype="{{ include("trick/_video.html.twig", {form: form.videos.vars.prototype})|e("html_attr")}}"
                    data-index="{{ form.videos|length > 0 ? form.videos|last.vars.name + 1 : 0 }}">
                {% for video in form.videos %}
                    <div class="col-4">
                    {{ include("trick/_video.html.twig", {form: video}) }}
                </div>
                {% endfor %}
            </div>
        <div class="text-center">
            {{ include('trick/figure_form.html.twig') }}
        </div>
    </div>
    </div>
    {{ form_end(form, {render_rest:false}) }}
    <a href="{{ path('trick_index') }}">Retour à la liste</a>
{% endblock %}
